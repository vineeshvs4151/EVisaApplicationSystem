@model IEnumerable<EVisaApplicationSystem.Models.Application>

@{
    ViewBag.Title = "RetrievesAllApplicationForAdmin";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<!-- Include the CSS file -->
<link href="~/Content/MyCSSStyle/RetrievesAllApplicationForAdmin.css" rel="stylesheet" />

<!-- Check for success message -->
@if (TempData["SuccessMessage"] != null)
{
    <!-- Display a success message if it exists -->
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

<!-- Check for error message -->
@if (TempData["ErrorMessage"] != null)
{
    <!-- Display an error message if it exists -->
    <div class="alert alert-danger">
        @TempData["ErrorMessage"]
    </div>
}

<div class="row">
    <div class="col-lg-1"></div>
    <div class="col-lg-10">
        <div class="table-container">
            <table class="table" style="height: 50px">
                <tr class="trclass-1">
                    <th>
                        Application id
                    </th>
                    <th>
                        User id
                    </th>
                    <th>
                        Application date
                    </th>
                    <th>
                        Visa type
                    </th>
                    <th>
                        Country
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Entry date
                    </th>
                    <th>
                        Visa duration
                    </th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>

                @foreach (var item in Model)
                {
            <tr class="trclass-2">
                <td style="text-align: center">
                    <!-- Display the application ID -->
                    @Html.DisplayFor(modelItem => item.ApplicationId)
                </td>
                <td style="text-align: center">
                    <!-- Display the user ID -->
                    @Html.DisplayFor(modelItem => item.Userid)
                </td>
                <td>
                    <!-- Display the application date -->
                    @Html.DisplayFor(modelItem => item.ApplicationDate)
                </td>
                <td>
                    <!-- Display the visa type -->
                    @Html.DisplayFor(modelItem => item.VisaType)
                </td>
                <td>
                    <!-- Display the country -->
                    @Html.DisplayFor(modelItem => item.Country)
                </td>
                <td class="status">
                    <!-- Display the status with a specific CSS class -->
                    <span class="status-value">@Html.DisplayFor(modelItem => item.Status)</span>
                </td>
                <td>
                    <!-- Display the entry date -->
                    @Html.DisplayFor(modelItem => item.EntryDate)
                </td>
                <td>
                    <!-- Display the departure date -->
                    @Html.DisplayFor(modelItem => item.VisaDuration)
                </td>
                <td>
                    <!-- Create a link to retrieve application details -->
                    <a href="@Url.Action("RetrivesApplicationByApplicationIdForAdmin", new { applicationId = item.ApplicationId })" class="icon-detail-link">
                        <!-- Display an icon for application details -->
                        <i class="fas fa-info-circle"></i>
                    </a>
                </td>
                    @if (item.Status == "waiting")
                    {
                        <td>
                            <!-- Create a link to update application status to "approved" -->
                            <a href="@Url.Action("UpdateApplicationStatusByAdmin", "Application", new { applicationId = item.ApplicationId, status = "approved" })" class="icon-approved">
                                <!-- Display an icon for approved status -->
                                <i class="fas fa-check-circle "></i>
                            </a>
                        </td>
                        <td>
                            <!-- Create a link to update application status to "unapproved" -->
                            <a href="@Url.Action("UpdateApplicationStatusByAdmin", "Application", new { applicationId = item.ApplicationId, status = "unapproved" })" class="icon-unapproved">
                                <!-- Display an icon for unapproved status -->
                                <i class="fas fa-times-circle "></i>
                            </a>
                        </td>
                    }
                </tr>

                }
            </table>
        </div>
    </div>
    <div class="col-lg-1"></div>
</div>

<!-- Include the JavaScript file -->
<script src="~/Scripts/MyJS/RetrievesAllApplicationForAdmin.js"></script>
